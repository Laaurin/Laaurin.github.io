"use strict";(self["webpackChunkmultiple_choice"]=self["webpackChunkmultiple_choice"]||[]).push([[685],{5398:function(e,t,s){s.d(t,{Z:function(){return u}});var i=s(3396),l=s(9242);const n={key:0,class:"labelText"};function a(e,t,s,a,o,r){return(0,i.wg)(),(0,i.iD)("div",{class:"labelCard new-label",onClick:t[4]||(t[4]=(...e)=>r.startEditing&&r.startEditing(...e))},[o.editing?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",n,"New Label +")),o.editing?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:1,type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.label=e),onKeydown:[t[1]||(t[1]=(0,l.D2)(((...e)=>r.saveNewLabel&&r.saveNewLabel(...e)),["enter"])),t[2]||(t[2]=(0,l.D2)(((...e)=>r.cancelEditing&&r.cancelEditing(...e)),["esc"]))],onBlur:t[3]||(t[3]=(...e)=>r.cancelEditing&&r.cancelEditing(...e)),ref:"input"},null,544)),[[l.nr,o.label]]):(0,i.kq)("",!0)])}var o={emits:["new-label"],data(){return{editing:!1,label:""}},methods:{startEditing(){this.editing=!0,this.$nextTick((()=>{this.$refs.input.focus()}))},saveNewLabel(){""!==this.label.trim()&&this.label.trim().length<15&&(this.$emit("new-label",{label:this.label}),this.editing=!1,this.label="")},cancelEditing(){this.editing=!1,this.label=""}}},r=s(89);const d=(0,r.Z)(o,[["render",a],["__scopeId","data-v-84612290"]]);var u=d},4140:function(e,t,s){s.d(t,{Z:function(){return p}});var i=s(3396),l=s(7139);const n=e=>((0,i.dD)("data-v-6b5654a9"),e=e(),(0,i.Cn)(),e),a={class:"labelText"},o=n((()=>(0,i._)("i",{class:"bi bi-x"},null,-1))),r=[o];function d(e,t,s,n,o,d){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["labelCard",{active:o.selected,clickable:s.clickable}]),onClick:t[1]||(t[1]=e=>s.clickable?d.toggleLabel():null)},[(0,i._)("div",a,(0,l.zw)(s.labelObject.label),1),o.selected&&s.clickable?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"removeIcon",onClick:t[0]||(t[0]=(...e)=>d.removeLabel&&d.removeLabel(...e))},r)):(0,i.kq)("",!0)],2)}var u={emits:["toggle-label","remove-label"],props:{labelObject:Object,active:Boolean,clickable:{type:Boolean,default:!1}},data(){return{selected:!1}},methods:{toggleLabel(){this.selected=!this.selected,this.$emit("toggle-label",this.labelObject)},removeLabel(e){e.stopPropagation(),this.$emit("remove-label",this.labelObject)}},created(){this.selected=this.active},name:"QuestionLabel"},c=s(89);const b=(0,c.Z)(u,[["render",d],["__scopeId","data-v-6b5654a9"]]);var p=b},3685:function(e,t,s){s.r(t),s.d(t,{default:function(){return we}});var i=s(3396);function l(e,t,s,l,n,a){const o=(0,i.up)("profile-questions");return(0,i.wg)(),(0,i.j4)(o)}s(7658);var n=s(7139),a=s(9242);const o=e=>((0,i.dD)("data-v-08abcdb7"),e=e(),(0,i.Cn)(),e),r={class:"profile-questions"},d={class:"filter-bar"},u=o((()=>(0,i._)("i",{class:"bi bi-filter"},null,-1))),c=o((()=>(0,i._)("label",{for:"filter"},"Filter by Label:",-1))),b=o((()=>(0,i._)("option",{value:""},"All Labels",-1))),p=["value"],w={class:"container questions-list"};function h(e,t,s,l,o,h){const v=(0,i.up)("editable-question"),g=(0,i.up)("edit-question-window");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",r,[(0,i._)("div",d,[u,c,(0,i.wy)((0,i._)("select",{id:"filter","onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedLabel=e)},[b,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.userLabels,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.label},(0,n.zw)(e.label),9,p)))),128))],512),[[a.bM,o.selectedLabel]])]),(0,i._)("div",w,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(h.filteredQuestions,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i.Wm)(v,{question:e,onEdit:h.edit,onDelete:h.deleteQuestion},null,8,["question","onEdit","onDelete"])])))),128))])]),o.editQuestion?((0,i.wg)(),(0,i.j4)(g,{key:0,question:o.questionInEdit,onClose:t[1]||(t[1]=e=>o.editQuestion=!1),onSave:h.updateQuestion},null,8,["question","onSave"])):(0,i.kq)("",!0)],64)}const v=e=>((0,i.dD)("data-v-655d8c83"),e=e(),(0,i.Cn)(),e),g={class:"row"},m={class:"col"},q={key:0},x={class:"row align-items-center"},_={class:"col"},L={class:"d-flex flex-wrap"},f={class:"col"},y=v((()=>(0,i._)("i",{class:"bi bi-pencil-square"},null,-1))),Q=v((()=>(0,i._)("span",{class:"d-none d-md-inline"},"Edit",-1))),D=[y,Q],k={key:0,class:"bi bi-trash"},I={key:1,class:"bi bi-trash d-md-none",style:{color:"red"}},C={class:"d-none d-md-inline"},E=v((()=>(0,i._)("hr",null,null,-1)));function U(e,t,s,l,a,o){const r=(0,i.up)("question-label");return(0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",m,[(0,i._)("div",null,[(0,i._)("div",{class:"text-start",onClick:t[0]||(t[0]=e=>a.extended=!a.extended)},[(0,i.Uk)((0,n.zw)(s.question.questionText)+" ",1),a.extended?((0,i.wg)(),(0,i.iD)("div",q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.question.answerOptions,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},(0,n.zw)(e.text),1)))),128))])):(0,i.kq)("",!0)]),(0,i._)("div",x,[(0,i._)("div",_,[(0,i._)("div",L,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.question.questionLabels,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id},[(0,i.Wm)(r,{"label-object":e,active:!0},null,8,["label-object"])])))),128))])])])])]),(0,i._)("div",f,[(0,i._)("button",{class:"my-global-button",style:{margin:"5px"},onClick:t[1]||(t[1]=(...e)=>o.editQuestion&&o.editQuestion(...e))},D),(0,i._)("button",{class:"my-global-button",style:{margin:"5px"},onClick:t[2]||(t[2]=(...e)=>o.toggleDelete&&o.toggleDelete(...e))},[a.isDeleting?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("i",k)),a.isDeleting?((0,i.wg)(),(0,i.iD)("i",I)):(0,i.kq)("",!0),(0,i._)("span",C,(0,n.zw)(o.deleteButtonText),1)])]),E])}var T=s(4140),O={components:{QuestionLabel:T.Z},emits:["edit","delete"],props:{question:Object},setup(){const e=(0,i.f3)("userLabels");return{userLabels:e}},data(){return{extended:!1,isDeleting:!1}},computed:{deleteButtonText(){return this.isDeleting?"Confirm ":"Delete"}},methods:{editQuestion(){this.$emit("edit",this.question)},toggleDelete(){this.isDeleting?this.delete():this.isDeleting=!0},delete(){this.$emit("delete",this.question),this.isDeleting=!1}}},A=s(89);const Z=(0,A.Z)(O,[["render",U],["__scopeId","data-v-655d8c83"]]);var j=Z;const V=e=>((0,i.dD)("data-v-6850e50e"),e=e(),(0,i.Cn)(),e),$={class:"pop-up-window"},N={class:"pop-up-inner"},P={class:"mb-3"},H={class:"question-input-wrapper"},K={class:"mb-3"},Y={class:"option-input-wrapper"},z=V((()=>(0,i._)("label",{class:"answer-label",for:"answer1"},"Option 1:",-1))),B={class:"mb-3"},W={class:"option-input-wrapper"},G=V((()=>(0,i._)("label",{class:"answer-label",for:"answer2"},"Option 2:",-1))),J={class:"mb-3"},S={class:"option-input-wrapper"},F=V((()=>(0,i._)("label",{class:"answer-label",for:"answer3"},"Option 3:",-1))),M={class:"mb-3"},R={class:"option-input-wrapper"},X=V((()=>(0,i._)("label",{class:"answer-label",for:"answer4"},"Option 4:",-1))),ee={class:"label-list"},te={class:"label-wrapper"};function se(e,t,s,l,n,o){const r=(0,i.up)("QuestionLabel"),d=(0,i.up)("new-label");return(0,i.wg)(),(0,i.iD)("div",$,[(0,i._)("div",N,[(0,i._)("div",P,[(0,i._)("div",H,[(0,i.wy)((0,i._)("input",{type:"text",id:"question","onUpdate:modelValue":t[0]||(t[0]=e=>n.questionText=e),placeholder:"Enter your question here",required:""},null,512),[[a.nr,n.questionText]])])]),(0,i._)("div",K,[(0,i._)("div",Y,[z,(0,i.wy)((0,i._)("input",{type:"text",id:"answer1","onUpdate:modelValue":t[1]||(t[1]=e=>n.answers[0].text=e),required:""},null,512),[[a.nr,n.answers[0].text]]),(0,i.wy)((0,i._)("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>n.correctAnswerIndex=e),value:0,required:""},null,512),[[a.G2,n.correctAnswerIndex]])])]),(0,i._)("div",B,[(0,i._)("div",W,[G,(0,i.wy)((0,i._)("input",{type:"text",id:"answer2","onUpdate:modelValue":t[3]||(t[3]=e=>n.answers[1].text=e),required:""},null,512),[[a.nr,n.answers[1].text]]),(0,i.wy)((0,i._)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>n.correctAnswerIndex=e),value:1,required:""},null,512),[[a.G2,n.correctAnswerIndex]])])]),(0,i._)("div",J,[(0,i._)("div",S,[F,(0,i.wy)((0,i._)("input",{type:"text",id:"answer3","onUpdate:modelValue":t[5]||(t[5]=e=>n.answers[2].text=e),required:""},null,512),[[a.nr,n.answers[2].text]]),(0,i.wy)((0,i._)("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=e=>n.correctAnswerIndex=e),value:2,required:""},null,512),[[a.G2,n.correctAnswerIndex]])])]),(0,i._)("div",M,[(0,i._)("div",R,[X,(0,i.wy)((0,i._)("input",{type:"text",id:"answer4","onUpdate:modelValue":t[7]||(t[7]=e=>n.answers[3].text=e),required:""},null,512),[[a.nr,n.answers[3].text]]),(0,i.wy)((0,i._)("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=e=>n.correctAnswerIndex=e),value:3,required:""},null,512),[[a.G2,n.correctAnswerIndex]])])]),(0,i._)("div",ee,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.userLabels,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"label-wrapper",key:t},[(0,i.Wm)(r,{"label-object":e,clickable:!0,active:o.isActive(e),onToggleLabel:o.toggleLabel},null,8,["label-object","active","onToggleLabel"])])))),128)),(0,i._)("div",te,[(0,i.Wm)(d,{onNewLabel:o.addLabel},null,8,["onNewLabel"])])]),(0,i._)("button",{class:"my-global-button",onClick:t[9]||(t[9]=(...e)=>o.saveChanges&&o.saveChanges(...e))},"Save"),(0,i._)("button",{class:"my-global-button",onClick:t[10]||(t[10]=(...e)=>o.cancelEditing&&o.cancelEditing(...e))},"Cancel")])])}var ie=s(5398),le={components:{QuestionLabel:T.Z,NewLabel:ie.Z},emits:["close","save"],props:{question:Object},setup(){const e=(0,i.f3)("userLabels");return{userLabels:e}},data(){return{questionText:"",answers:[{text:""},{text:""},{text:""},{text:""}],questionLabels:[],addedLabels:[],correctAnswerIndex:null,updatedQuestion:null}},methods:{addLabel(e){this.userLabels.push(e),this.addedLabels.push(e)},cancelEditing(){this.$emit("close")},saveChanges(){let e=this.createPrivateQuestion();this.$emit("save",e,this.addedLabels)},toggleLabel(e){const t=this.questionLabels.some((t=>t.label===e.label));t?this.questionLabels=this.questionLabels.filter((t=>t.label!==e.label)):this.questionLabels.push(e),console.log("after toggle: ",this.questionLabels)},isActive(e){return this.questionLabels.some((t=>t.label===e.label))},createPrivateQuestion(){return{questionText:this.questionText,questionLabels:this.questionLabels.map((e=>({label:e.label}))),answerOptions:this.answers.map(((e,t)=>({text:e.text,isCorrect:t===this.correctAnswerIndex})))}}},created(){this.questionText=this.question.questionText,this.answers=this.question.answerOptions.map((e=>({text:e.text}))),this.questionLabels=this.question.questionLabels.map((e=>({label:e.label}))),this.correctAnswerIndex=this.question.answerOptions.findIndex((e=>e.isCorrect)),console.log("created questionLabels: ",this.questionLabels)}};const ne=(0,A.Z)(le,[["render",se],["__scopeId","data-v-6850e50e"]]);var ae=ne,oe=s(2392),re=s(4287),de={name:"ProfileQuestions",components:{EditQuestionWindow:ae,EditableQuestion:j},setup(){const e=(0,i.f3)("userQuestions"),t=(0,i.f3)("userLabels");return{userQuestions:e,userLabels:t}},data(){return{selectedLabel:"",editQuestion:!1,questionInEdit:null}},computed:{filteredQuestions(){return this.selectedLabel?this.userQuestions.filter((e=>e.questionLabels.some((e=>e.label===this.selectedLabel)))):this.userQuestions}},methods:{async updateQuestion(e,t){this.editQuestion=!1;const s=this.userQuestions.findIndex((e=>e.id===this.questionInEdit.id));-1!==s&&(this.userQuestions[s]=e);const i=oe.I8.currentUser;if(i){const s=(0,re.JU)(oe.ZP,"users",i.uid,"questions",this.questionInEdit.id);await(0,re.pl)(s,e);for(const e of t)await this.addNewLabelToUserLabels(e)}},async deleteQuestion(e){this.userQuestions=this.userQuestions.filter((t=>t.id!==e.id));const t=oe.I8.currentUser;if(t){const s=(0,re.JU)(oe.ZP,"users",t.uid,"questions",e.id);await(0,re.oe)(s)}},async addNewLabelToUserLabels(e){try{const t=oe.I8.currentUser;if(t){const s=(0,re.hJ)(oe.ZP,`users/${t.uid}/labels`),i=(0,re.JU)(s);await(0,re.pl)(i,e)}}catch(t){console.error("Error adding new label to user's labels:",t)}},edit(e){this.questionInEdit=e,this.editQuestion=!0}}};const ue=(0,A.Z)(de,[["render",h],["__scopeId","data-v-08abcdb7"]]);var ce=ue,be={components:{ProfileQuestions:ce},data(){return{}},methods:{editQuestion(){},deleteQuestion(){},manageLabels(){},toggleQuestion(e){this.isQuestionExpanded(e)?this.expandedQuestions=this.expandedQuestions.filter((t=>t!==e)):this.expandedQuestions.push(e)},isQuestionExpanded(e){return this.expandedQuestions.includes(e)}}};const pe=(0,A.Z)(be,[["render",l]]);var we=pe}}]);
//# sourceMappingURL=685.9452b569.js.map