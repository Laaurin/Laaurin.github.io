"use strict";(self["webpackChunkmultiple_choice"]=self["webpackChunkmultiple_choice"]||[]).push([[522],{5398:function(e,t,l){l.d(t,{Z:function(){return u}});var s=l(3396),a=l(9242);const n={key:0,class:"labelText"};function i(e,t,l,i,r,o){return(0,s.wg)(),(0,s.iD)("div",{class:"labelCard new-label",onClick:t[4]||(t[4]=(...e)=>o.startEditing&&o.startEditing(...e))},[r.editing?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",n,"New Label +")),r.editing?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:1,type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.label=e),onKeydown:[t[1]||(t[1]=(0,a.D2)(((...e)=>o.saveNewLabel&&o.saveNewLabel(...e)),["enter"])),t[2]||(t[2]=(0,a.D2)(((...e)=>o.cancelEditing&&o.cancelEditing(...e)),["esc"]))],onBlur:t[3]||(t[3]=(...e)=>o.cancelEditing&&o.cancelEditing(...e)),ref:"input"},null,544)),[[a.nr,r.label]]):(0,s.kq)("",!0)])}var r={emits:["new-label"],data(){return{editing:!1,label:""}},methods:{startEditing(){this.editing=!0,this.$nextTick((()=>{this.$refs.input.focus()}))},saveNewLabel(){""!==this.label.trim()&&this.label.trim().length<15&&(this.$emit("new-label",{label:this.label}),this.editing=!1,this.label="")},cancelEditing(){this.editing=!1,this.label=""}}},o=l(89);const c=(0,o.Z)(r,[["render",i],["__scopeId","data-v-84612290"]]);var u=c},4140:function(e,t,l){l.d(t,{Z:function(){return p}});var s=l(3396),a=l(7139);const n=e=>((0,s.dD)("data-v-6b5654a9"),e=e(),(0,s.Cn)(),e),i={class:"labelText"},r=n((()=>(0,s._)("i",{class:"bi bi-x"},null,-1))),o=[r];function c(e,t,l,n,r,c){return(0,s.wg)(),(0,s.iD)("div",{class:(0,a.C_)(["labelCard",{active:r.selected,clickable:l.clickable}]),onClick:t[1]||(t[1]=e=>l.clickable?c.toggleLabel():null)},[(0,s._)("div",i,(0,a.zw)(l.labelObject.label),1),r.selected&&l.clickable?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"removeIcon",onClick:t[0]||(t[0]=(...e)=>c.removeLabel&&c.removeLabel(...e))},o)):(0,s.kq)("",!0)],2)}var u={emits:["toggle-label","remove-label"],props:{labelObject:Object,active:Boolean,clickable:{type:Boolean,default:!1}},data(){return{selected:!1}},methods:{toggleLabel(){this.selected=!this.selected,this.$emit("toggle-label",this.labelObject)},removeLabel(e){e.stopPropagation(),this.$emit("remove-label",this.labelObject)}},created(){this.selected=this.active},name:"QuestionLabel"},d=l(89);const b=(0,d.Z)(u,[["render",c],["__scopeId","data-v-6b5654a9"]]);var p=b},522:function(e,t,l){l.r(t),l.d(t,{default:function(){return P}});var s=l(3396),a=l(9242);const n=e=>((0,s.dD)("data-v-3525b302"),e=e(),(0,s.Cn)(),e),i={class:"container"},r=n((()=>(0,s._)("h2",null,"Upload new question",-1))),o={class:"mb-3"},c={class:"question-input-wrapper"},u={class:"mb-3"},d={class:"option-input-wrapper"},b=n((()=>(0,s._)("label",{class:"answer-label",for:"answer1"},"Option 1:",-1))),p={class:"mb-3"},w={class:"option-input-wrapper"},h=n((()=>(0,s._)("label",{class:"answer-label",for:"answer2"},"Option 2:",-1))),v={class:"mb-3"},m={class:"option-input-wrapper"},g=n((()=>(0,s._)("label",{class:"answer-label",for:"answer3"},"Option 3:",-1))),L={class:"mb-3"},_={class:"option-input-wrapper"},x=n((()=>(0,s._)("label",{class:"answer-label",for:"answer4"},"Option 4:",-1))),y=n((()=>(0,s._)("label",null,"private Question",-1))),q={key:0},f={class:"label-list"},k={class:"label-wrapper"},I=n((()=>(0,s._)("button",{class:"my-global-button",type:"submit"},"add question",-1)));function Q(e,t,l,n,Q,U){const E=(0,s.up)("QuestionLabel"),A=(0,s.up)("new-label");return(0,s.wg)(),(0,s.iD)("div",i,[r,(0,s._)("form",{onSubmit:t[10]||(t[10]=(0,a.iM)(((...e)=>U.submitForm&&U.submitForm(...e)),["prevent"]))},[(0,s._)("div",o,[(0,s._)("div",c,[(0,s.wy)((0,s._)("input",{type:"text",id:"question","onUpdate:modelValue":t[0]||(t[0]=e=>Q.question=e),placeholder:"Enter your question here",required:""},null,512),[[a.nr,Q.question]])])]),(0,s._)("div",u,[(0,s._)("div",d,[b,(0,s.wy)((0,s._)("input",{type:"text",id:"answer1","onUpdate:modelValue":t[1]||(t[1]=e=>Q.answers[0].text=e),required:""},null,512),[[a.nr,Q.answers[0].text]]),(0,s.wy)((0,s._)("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>Q.correctAnswerIndex=e),value:0,required:""},null,512),[[a.G2,Q.correctAnswerIndex]])])]),(0,s._)("div",p,[(0,s._)("div",w,[h,(0,s.wy)((0,s._)("input",{type:"text",id:"answer2","onUpdate:modelValue":t[3]||(t[3]=e=>Q.answers[1].text=e),required:""},null,512),[[a.nr,Q.answers[1].text]]),(0,s.wy)((0,s._)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>Q.correctAnswerIndex=e),value:1,required:""},null,512),[[a.G2,Q.correctAnswerIndex]])])]),(0,s._)("div",v,[(0,s._)("div",m,[g,(0,s.wy)((0,s._)("input",{type:"text",id:"answer3","onUpdate:modelValue":t[5]||(t[5]=e=>Q.answers[2].text=e),required:""},null,512),[[a.nr,Q.answers[2].text]]),(0,s.wy)((0,s._)("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=e=>Q.correctAnswerIndex=e),value:2,required:""},null,512),[[a.G2,Q.correctAnswerIndex]])])]),(0,s._)("div",L,[(0,s._)("div",_,[x,(0,s.wy)((0,s._)("input",{type:"text",id:"answer4","onUpdate:modelValue":t[7]||(t[7]=e=>Q.answers[3].text=e),required:""},null,512),[[a.nr,Q.answers[3].text]]),(0,s.wy)((0,s._)("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=e=>Q.correctAnswerIndex=e),value:3,required:""},null,512),[[a.G2,Q.correctAnswerIndex]])])]),(0,s._)("div",null,[y,(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>Q.privateQuestion=e)},null,512),[[a.e8,Q.privateQuestion]]),Q.privateQuestion?((0,s.wg)(),(0,s.iD)("div",q,[(0,s._)("div",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.userLabels,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"label-wrapper",key:t},[(0,s.Wm)(E,{"label-object":e,clickable:!0,onToggleLabel:U.toggleLabel},null,8,["label-object","onToggleLabel"])])))),128)),(0,s._)("div",k,[(0,s.Wm)(A,{onNewLabel:U.addLabel},null,8,["onNewLabel"])])])])):(0,s.kq)("",!0)]),I],32)])}l(7658);var U=l(2392),E=l(4287),A=l(4140),D=l(5398),C={components:{NewLabel:D.Z,QuestionLabel:A.Z},setup(){const e=(0,s.f3)("userLabels");return{userLabels:e}},created(){console.log(this.userLabels[0].label)},data(){return{question:"",answers:[{text:""},{text:""},{text:""},{text:""}],correctAnswerIndex:null,privateQuestion:!1,selectedLabels:[],newLabels:[]}},methods:{addLabel(e){this.userLabels.push(e),this.newLabels.push(e)},async submitForm(){if(null===this.correctAnswerIndex)return void alert("Bitte wÃ¤hlen Sie eine richtige Antwort aus.");const e=this.createQuestion();console.log(e),this.privateQuestion?await this.uploadPrivateQuestion(e):await this.uploadPublicQuestion(e),this.question="",this.answers.forEach((e=>e.text="")),this.correctAnswerIndex=null,this.privateQuestion=!1,this.selectedLabels=[],this.newLabels=[]},createQuestion(){const e={questionText:this.question,answerOptions:this.answers.map(((e,t)=>({text:e.text,isCorrect:t===this.correctAnswerIndex})))};return this.privateQuestion&&(e.questionLabels=this.selectedLabels.map((e=>({label:e.label})))),e},async uploadPrivateQuestion(e){const t=(0,E.hJ)(U.ZP,`users/${U.I8.currentUser.uid}/questions`),l=await(0,E.ET)(t,e);for(const s of this.newLabels)await this.addNewLabelToUserLabels(s);console.log("Private question created:",l.id)},async uploadPublicQuestion(e){try{const t=(0,E.hJ)(U.ZP,"unreviewedQuestions"),l=await(0,E.ET)(t,e);console.log("Public question uploaded:",l.id)}catch(t){console.error("Error uploading public question:",t)}},async addNewLabelToUserLabels(e){try{const t=U.I8.currentUser;if(t){const l=(0,E.hJ)(U.ZP,`users/${t.uid}/labels`),s=(0,E.JU)(l);await(0,E.pl)(s,e)}}catch(t){console.error("Error adding new label to user's labels:",t)}},toggleLabel(e){this.selectedLabels.includes(e)?this.selectedLabels=this.selectedLabels.filter((t=>t!==e)):this.selectedLabels.push(e)}}},V=l(89);const O=(0,V.Z)(C,[["render",Q],["__scopeId","data-v-3525b302"]]);var P=O}}]);
//# sourceMappingURL=522.c8e8c776.js.map